<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: "Poppins", sans-serif; }
    body {
      height: 100vh; width: 100%;
  background-image: url('../../../IMG/Bas4.jpg') ;
      background-position: center;
      background-size: cover;
      display: flex; justify-content: flex-end; align-items: center;
    }

    /* ===== Sidebar ===== */
    .sidebar {
      position: fixed; top: 0; left: 0;
      width: 260px; height: 100%;
      background: rgba(255, 255, 255, 0.2); backdrop-filter: blur(17px);
      border-right: 1px solid rgba(255, 255, 255, 0.7);
      display: flex; flex-direction: column; justify-content: flex-start;
      padding: 20px 0;
      z-index: 0; /* keep under banner */
    }
    .logo { display: flex; align-items: center; padding: 0 20px; color: #000; }
    .logo img { width: 43px; border-radius: 50%; }
  .logo h2 { font-size: 1.15rem; font-weight: 600; margin-left: 15px; display: block; }
    .links { list-style: none; padding: 0 8px; }
    .links li {
      display: flex; align-items: center; border-radius: 4px;
      transition: background 0.3s; padding: 10px;
    }
    .links li:hover { cursor: pointer; background: rgba(0,0,0,0.05); }
    .links li span { padding-right: 10px; font-size: 24px; color: #000; }
    .links li a {
      color: #000; text-decoration: none; font-weight: 500;
      white-space: nowrap; display: inline-block;
    }
    .links li.active {
      background: #0734bb !important; border-left: 4px solid #ffffff;
    }
    .links li.active a, .links li.active span {
      color: #fff !important; font-weight: 600;
    }
    .bottom-links { margin-top: auto; }

    /* ===== Kotak utama ===== */
    .kotak {
      max-width: 1200px;
      width: calc(100% - 320px);
      min-height: 520px;
      background: rgb(251, 252, 255);
      border: 4px solid #ffffff; border-radius: 20px;
      box-shadow: 0 6px 18px rgba(0,0,0,.1);
      display: flex; flex-direction: column; align-items: center;
      padding: 20px; font-size: 1.05rem; font-weight: 600;
        max-width: 1200px;
  width: calc(100% - 320px); /* ruang lebih sikit utk sidebar */
  margin-left: 140px; /* offset sikit bila sidebar kecil */
      margin: 60px auto; opacity: 0.95;
      position: relative; overflow: hidden; z-index: 0;
       transition: margin-left 0.3s ease, width 0.3s ease;
    }

    /* ===== Banner Scroll Event ===== */
    .event-box {
      height: 300px;
      color: #ffffff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      border-radius: 12px;
      margin-bottom: 10px;
      transition: transform 0.3s;
      position: relative;
      overflow: hidden;
      background: #0c48fe;
      width: 100%;
    }
    .event-box img {
      position: absolute;
      inset: 0;
      width: 100%; height: 100%;
      object-fit: cover;
      z-index: 0;
      opacity: 1;
      transition: opacity 300ms ease-in-out, transform 300ms ease-in-out;
    }
    .event-box::after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(rgba(12,72,254,0.45), rgba(7,52,187,0.45));
      z-index: 1;
    }
    .event-box h2,
    .event-box .event-text {
      position: relative;
      z-index: 2;
      color: #fff;
      text-align: center;
      padding: 0 12px;
      text-shadow: 0 2px 6px rgba(0,0,0,0.4);
    }
    .nav-btn {
      position: absolute;
      top: 50%; transform: translateY(-50%);
      z-index: 4;
      background: rgba(0,0,0,0.35);
      color: #fff;
      border: none; width: 44px; height: 44px;
      border-radius: 44px;
      display: flex; align-items: center; justify-content: center;
      cursor: pointer; backdrop-filter: blur(4px);
    }
    .nav-btn.left { left: 12px; }
    .nav-btn.right { right: 12px; }
    .nav-btn:hover { background: rgba(0,0,0,0.55); }
    .event-details {
      padding: 10px 0;
      font-size: 1.1rem;
      color: #333;
    }

    /* make kotak sit to the right of the fixed 260px sidebar */
    .kotak {
      margin-left: 300px; /* push banner more right so it doesn't overlap */
      width: calc(100% - 340px);
      z-index: 2; /* above the sidebar */
    }
    .event-details span { font-weight: 600; }

    /* ===== Modal Logout ===== */
    .modal { display: none; position: fixed; inset: 0; z-index: 9999; align-items: center; justify-content: center; }
    .modal[aria-hidden="false"] { display: flex; }
    .modal-backdrop { position: absolute; inset: 0; background: rgba(0,0,0,0.45); }
    .modal-panel {
      position: relative; background: #fff; border-radius: 10px;
      padding: 18px 20px; box-shadow: 0 8px 30px rgba(0,0,0,0.15);
      max-width: 360px; width: 90%; z-index: 1; text-align: center;
    }
    .modal-panel h3 { margin: 0 0 8px; font-size: 1.05rem; }
    .modal-panel p { margin: 0 0 12px; color: #444; }
    .modal-actions { display: flex; gap: 10px; justify-content: center; margin-top: 8px; }
    .btn { padding: 8px 14px; border-radius: 8px; border: 1px solid #ccc; background: #f5f5f5; cursor: pointer; }
    .btn.primary { background: #0c48fe; color: #fff; border-color: #0c48fe; }
  </style>
</head>
<body>
  <!-- Global search bar (inserted) -->
  <header class="topbar" role="banner">
    <div class="search-wrap">
      <input id="globalSearch" class="search-input" type="search" placeholder="Search site..." aria-label="Search">
      <button class="search-btn" type="button" onclick="globalSearch()" aria-label="Search">üîç</button>
    </div>
  </header>
  <style>
    /* topbar: keep positioned; search container (search-wrap) is white */
    .topbar{position:fixed;left:260px;right:0;top:0;height:64px;display:flex;align-items:center;padding:0 18px;background:transparent;backdrop-filter:none;z-index:999}
    .search-wrap{max-width:1100px;width:100%;display:flex;gap:8px;background:#ffffff;padding:8px;border-radius:8px}
    /* make the input white to match the container */
    .search-input{flex:1;padding:8px 12px;border:1px solid #e5e7eb;border-radius:8px;font-size:14px;background:#fff}
    .search-btn{padding:8px 12px;border-radius:8px;border:1px solid #e5e7eb;background:#0b63ff;color:#fff;cursor:pointer}
    .kotak,.content,main{margin-top:84px}
    @media(max-width:800px){.topbar{left:0} .kotak,.content,main{margin-left:0}}
  </style>
  <script>
    function globalSearch(){
      const q=document.getElementById('globalSearch').value.trim();
      if(!q) return;
      const found = document.querySelectorAll('body *:not(script):not(style)');
      for(const el of found){
        if(el.textContent && el.textContent.toLowerCase().includes(q.toLowerCase())){
          el.scrollIntoView({behavior:'smooth',block:'center'});
          el.style.outline='3px solid #ffea00';
          setTimeout(()=>el.style.outline='',3000);
          return;
        }
      }
      alert('No results on this page.');
    }
  </script>

  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="logo">
  <img src="../../../IMG/PROTON.png" alt="logo">
      <h2>Admin</h2>
    </div>
    <ul class="links main-links">
      <li class="active"><span class="material-symbols-outlined">dashboard</span><a href="#">Laman Utama</a></li>
      <li><span class="material-symbols-outlined">calendar_month</span><a href="Booking.html">Kemaskini Kalendar</a></li>
      <li><span class="material-symbols-outlined">notifications</span><a href="notification.html">Notifikasi Tempahan</a></li>
      <li><span class="material-symbols-outlined">library_books</span><a href="vehicle.html">Pengurusan Dokumen</a></li>
    </ul>
    <ul class="links bottom-links">
      <li><span class="material-symbols-outlined">person</span><a href="/admin/pages/main/bottom/profile.html">Profil</a></li>
      <li class="logout-link"><span class="material-symbols-outlined">logout</span><a href="#">Log Keluar</a></li>
    </ul>
  </aside>

  <!-- Kotak content -->
  <div class="kotak">
    <!-- Banner scroll event -->
    <div class="event-box" id="carouselBox">
      <h2 id="carouselTitle">Event Gallery</h2>
  <img id="carouselImg" src="../../../IMG/itvsmk.jpg" alt="Event image">
      <button class="nav-btn left" id="prevBtn" aria-label="Previous">‚Äπ</button>
      <button class="nav-btn right" id="nextBtn" aria-label="Next">‚Ä∫</button>
      <p class="event-text" id="carouselCaption">Seminar ICT Management, 10:00 AM - 12:00 PM</p>
    </div>

    <!-- Text bawah kotak -->
    <div class="event-details">
      <p id="ongoingEvent">Tiada event semasa</p>
    </div>
  </div>

  <!-- Logout Modal -->
  <div id="logoutModal" class="modal" aria-hidden="true">
    <div class="modal-backdrop"></div>
    <div class="modal-panel" role="dialog" aria-modal="true" aria-labelledby="logoutTitle">
      <h3 id="logoutTitle">Sahkan Log Keluar</h3>
      <p>Adakah anda pasti mahu log keluar?</p>
      <div class="modal-actions">
        <button id="confirmLogout" class="btn primary">Ya, Log Keluar</button>
        <button id="cancelLogout" class="btn">Tidak</button>
      </div>
    </div>
  </div>

  <script>
    // ==== Logout Modal ====
    (function(){
      const logoutLink = document.querySelector('.logout-link a');
      if (!logoutLink) return;
      const modal = document.getElementById('logoutModal');
      const confirmBtn = document.getElementById('confirmLogout');
      const cancelBtn = document.getElementById('cancelLogout');

      logoutLink.addEventListener('click', function(e){
        e.preventDefault();
        modal.dataset.href = 'logout.html';
        modal.setAttribute('aria-hidden', 'false');
      });
      confirmBtn.addEventListener('click', function(){
        const href = modal.dataset.href || logoutLink.getAttribute('href');
        if (href) window.location.href = href;
        else modal.setAttribute('aria-hidden', 'true');
      });
      cancelBtn.addEventListener('click', closeModal);
      modal.querySelector('.modal-backdrop').addEventListener('click', closeModal);
      document.addEventListener('keydown', function(e){ if (e.key === 'Escape') closeModal(); });
      function closeModal(){
        modal.setAttribute('aria-hidden', 'true');
        delete modal.dataset.href;
      }
    })();

    // ==== Banner Scroll Event ====
    const images = [
  { src: '../../../IMG/bravos.jpg', title: 'Pasukan Bolasepak Bravo 2024', caption: 'Naib Juara Pertandingan Bolasepak ILPS' },
  { src: '../../../IMG/match.jpg', title: 'IT VS MEKANIKAL', caption: 'Pertembungan Dua Jabatan' },
  { src: '../../../IMG/unity.jpg', title: 'Hari Sukan ILPS', caption: 'Sambutan Meriah, Persaingan Sihat 4 Kontinjen' }
    ];
    let current = 0;
    const imgEl = document.getElementById('carouselImg');
    const titleEl = document.getElementById('carouselTitle');
    const captionEl = document.getElementById('carouselCaption');
    const ongoingEvent = document.getElementById('ongoingEvent');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const box = document.getElementById('carouselBox');

    function showIndex(i) {
      current = (i + images.length) % images.length;
      const item = images[current];
      imgEl.style.opacity = 0;
      setTimeout(() => {
        imgEl.src = item.src;
        imgEl.alt = item.title;
        titleEl.textContent = item.title;
        captionEl.textContent = item.caption;
        ongoingEvent.innerHTML = `<span>Event:</span> ${item.caption}`;
        imgEl.style.opacity = 1;
      }, 220);
      box.classList.add('scrolled');
      clearTimeout(box._scrolledTimer);
      box._scrolledTimer = setTimeout(() => box.classList.remove('scrolled'), 700);
    }
    prevBtn.addEventListener('click', () => showIndex(current - 1));
    nextBtn.addEventListener('click', () => showIndex(current + 1));
    document.addEventListener('keydown', (e) => {
      if(e.key === 'ArrowLeft') showIndex(current - 1);
      if(e.key === 'ArrowRight') showIndex(current + 1);
    });
    showIndex(0);
    let autoplayId = setInterval(() => showIndex(current + 1), 6000);
    box.addEventListener('mouseenter', () => clearInterval(autoplayId));
    box.addEventListener('mouseleave', () => autoplayId = setInterval(() => showIndex(current + 1), 6000));
  </script>
</body>
</html>

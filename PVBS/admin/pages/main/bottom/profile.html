<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Profil</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    * { margin:0; padding:0; box-sizing:border-box; font-family:"Poppins",sans-serif; }
    body { height:100vh; width:100%; 

    /* Sidebar */
    .sidebar{position:fixed;top:0;left:0;width:260px;height:100%;background:rgba(255,255,255,0.2);backdrop-filter:blur(17px);border-right:1px solid rgba(255,255,255,0.7);display:flex;flex-direction:column;padding:20px 0;}
    .logo{display:flex;align-items:center;padding:0 20px;color:#000;}
    .logo img{width:43px;border-radius:50%;}
    .logo h2{font-size:1.15rem;font-weight:600;margin-left:15px;}
    .links{list-style:none;padding:0 8px;}
    .links li{display:flex;align-items:center;border-radius:4px;padding:10px;transition:background 0.3s;}
    .links li:hover{cursor:pointer;background:rgba(255,255,255,0.12);}
    .links li span{padding-right:10px;font-size:24px;color:#000;}
    .links li a{color:#000;text-decoration:none;font-weight:500;white-space:nowrap;}
    .links li.active{background:#0734bb;border-left:4px solid #fff;}
    .links li.active a, .links li.active span{color:#fff;font-weight:600;}
    .bottom-links{margin-top:auto;}

    /* Profile Box */
    .profile-main {margin-left:260px; display:flex; justify-content:center; align-items:center; height:100vh;}
    .profile-box {background:#fff; padding:32px 28px; border-radius:12px; box-shadow:0 4px 24px rgba(0,0,0,0.08); width:340px; display:flex; flex-direction:column; align-items:center;}
    .profile-box img {width:90px;height:90px;border-radius:50%;object-fit:cover;margin-bottom:18px;border:3px solid #0c48fe;}
    .profile-box h2 {margin:0 0 8px 0;color:#0c48fe;font-size:1.5rem;}
    .profile-box p {margin:4px 0 16px 0;color:#333;font-size:1rem;}
    .profile-box button {width:100%; padding:10px; background:#0c48fe; color:#fff; border:none; border-radius:6px; font-size:16px;font-weight:600; cursor:pointer;}
    .profile-box button:hover {background:#0734bb;}

    /* Logout modal */
    .modal { display: none; position: fixed; inset: 0; z-index: 9999; align-items: center; justify-content: center; }
    .modal[aria-hidden="false"] { display:flex; }
    .modal-backdrop { position:absolute; inset:0; background: rgba(0,0,0,0.45); }
    .modal-panel { position:relative; background:#fff; border-radius:10px; padding:18px 20px; box-shadow:0 8px 30px rgba(0,0,0,0.15); max-width:360px; width:90%; z-index:1; text-align:center; }
    .modal-panel h3{margin:0 0 8px;font-size:1.05rem;}
    .modal-panel p{margin:0 0 12px;color:#444;}
    .modal-actions{display:flex;gap:10px;justify-content:center;margin-top:8px;}
    .btn{padding:8px 14px;border-radius:8px;border:1px solid #ccc;background:#f5f5f5;cursor:pointer;}
    .btn.primary{background:#0c48fe;color:#fff;border-color:#0c48fe;}
  </style>
</head>
<body>
  <!-- Global search bar (inserted) -->
  <header class="topbar" role="banner">
    <div class="search-wrap">
      <input id="globalSearch" class="search-input" type="search" placeholder="Search site..." aria-label="Search">
      <button class="search-btn" type="button" onclick="globalSearch()" aria-label="Search">Search</button>
    </div>
  </header>
  <style>
    .topbar{position:fixed;left:260px;right:0;top:0;height:64px;display:flex;align-items:center;padding:0 18px;background:transparent;backdrop-filter:none;z-index:999}
    .search-wrap{max-width:1100px;width:100%;display:flex;gap:8px;background:#ffffff;padding:8px;border-radius:8px}
    .search-input{flex:1;padding:8px 12px;border:1px solid #e5e7eb;border-radius:8px;font-size:14px;background:#fff}
    .search-btn{padding:8px 12px;border-radius:8px;border:1px solid #e5e7eb;background:#0b63ff;color:#fff;cursor:pointer}
    .profile-main{margin-top:84px}
  </style>
  <script>
    function globalSearch(){
      const q=document.getElementById('globalSearch').value.trim();
      if(!q) return;
      const found = document.querySelectorAll('body *:not(script):not(style)');
      for(const el of found){
        if(el.textContent && el.textContent.toLowerCase().includes(q.toLowerCase())){
          el.scrollIntoView({behavior:'smooth',block:'center'});
          el.style.outline='3px solid #ffea00';
          setTimeout(()=>el.style.outline='',3000);
          return;
        }
      }
      alert('No results on this page.');
    }
  </script>
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="logo">
  <img src="../../../IMG/PROTON.png" alt="logo">
      <h2>Admin</h2>
    </div>
    <ul class="links main-links">
      <li><span class="material-symbols-outlined">dashboard</span><a href="/admin/pages/main/dashboard.html">Laman Utama</a></li>
      <li><span class="material-symbols-outlined">calendar_month</span><a href="/admin/pages/main/Booking.html">Kemaskini Kalendar</a></li>
      <li><span class="material-symbols-outlined">notifications</span><a href="/admin/pages/main/notification.html">Notifikasi Tempahan</a></li>
      <li>
        <span class="material-symbols-outlined">library_books</span>
  <a href="/admin/pages/main/vehicle.html">Pengurusan Dokumen</a>
      </li>
    </ul>
    <ul class="links bottom-links">
      <li class="active"><span class="material-symbols-outlined">person</span><a href="/admin/pages/main/bottom/profile.html">Profil</a></li>
      <li class="logout-link"><span class="material-symbols-outlined">logout</span><a href="/admin/pages/main/bottom/logout.html">Log Keluar</a></li>
    </ul>
  </aside>

  <!-- Main Profile -->
  <!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8">
  <title>Profil & Projek</title>
  <!-- CropperJS CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css"/>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
  background: url('../../../IMG/Bas4.jpg') no-repeat center center fixed;
      background-size: cover;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      gap: 30px;
    }

    .card {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 15px;
      box-shadow: 0px 4px 10px rgba(0,0,0,0.2);
      padding: 20px;
      width: 380px;
    }

    /* Kad kiri */
    .card.profile {
      text-align: center;
    }

    .profile-container {
      position: relative;
      display: inline-block;
      margin-bottom: 10px;
    }

    .profile-container img {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      background: #eee;
      cursor: default;
    }

    .upload-btn {
      position: absolute;
      bottom: 0;
      right: 0;
      background: rgb(9, 30, 255);
      color: white;
      border-radius: 50%;
      padding: 6px;
      font-size: 14px;
      cursor: pointer;
    }

    input[type="file"] {
      display: none;
    }

    .role {
      color: red;
      font-weight: bold;
      margin-bottom: 15px;
    }

    label {
      font-weight: bold;
      display: block;
      margin-top: 10px;
      text-align: left;
    }

    input {
      width: 100%;
      padding: 8px;
      border-radius: 8px;
      border: 1px solid #ccc;
      background: #eee;
    }

    button {
      margin-top: 15px;
      width: 100%;
      padding: 10px;
      background: dodgerblue;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
    }

    button:hover {
      background: #062c5d;
    }

    /* Kad kanan */
    .card.project {
      text-align: left;
    }

    .project-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .project-header img {
      max-height: 50px;
    }

    .project h3 {
      margin-top: 0;
    }

    /* Modal Crop */
    #cropModal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }

    #cropBox {
      background: white;
      padding: 20px;
      border-radius: 10px;
      max-width: 500px;
      text-align: center;
    }

    #cropBox img {
      max-width: 100%;
      max-height: 400px;
      display: block;
      margin: 0 auto;
    }

    .crop-actions {
      margin-top: 10px;
      text-align: right;
    }
  </style>
</head>
<body>
  <!-- Kad kiri: Profil -->
  <div class="card profile">
    <div class="profile-container">
      <!-- Placeholder gambar default -->
  <img id="profilePic" src="../../../IMG/person.png" alt="Placeholder">
      <label for="uploadPic" class="upload-btn">ðŸ“·</label>
      <input type="file" id="uploadPic" accept="image/*">
    </div>

    <h3>Encik Jeffry</h3>
    <p class="role">Peranan: ADMIN</p>

    <label>Nama:</label>
    <input type="text" value="Encik Jeffry">

    <label>Email:</label>
    <input type="email" value="jeffry@example.com">

    <label>No Telefon:</label>
    <input type="tel" value="012-3456789">

    <button>SIMPAN</button>
  </div>

  <!-- Kad kanan: Latarbelakang Projek -->
  <div class="card project">
    <div class="project-header">
  <img src="../../../IMG/PROTON.png" alt="Proton">
  <img src="../../../IMG/ADTCMLK.png" alt="ADTEC">
    </div>
    <h3>Latarbelakang Sistem...</h3>
    <p>
      Proton Vehicle Booking System ini merupakan satu projek yang dibangunkan sebagai salah satu inisiatif pembelajaran oleh pelajar ADTEC Melaka dalam bidang Sistem Komputer. 
      Sistem ini menyokong proses tempahan kenderaan rasmi kolej dengan lebih teratur, mudah diakses, dan mesra pengguna. 
      Selain itu, projek ini juga selaras dengan pelaksanaan Organisasi EKSA di ADTEC Melaka, yang menekankan aspek kecekapan, keteraturan, serta suasana kerja yang lebih sistematik dan kondusif.
    </p>
  </div>

  <!-- Modal Crop -->
  <div id="cropModal">
    <div id="cropBox">
      <img id="cropImage" alt="Crop preview">
      <div class="crop-actions">
        <button id="cropBtn">Crop & Simpan</button>
        <button onclick="closeModal()">Batal</button>
      </div>
    </div>
  </div>

  <!-- CropperJS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>
  <script>
    let cropper;

    document.getElementById("uploadPic").addEventListener("change", function(e) {
      const file = e.target.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = function(event) {
        const cropImage = document.getElementById("cropImage");
        cropImage.src = event.target.result;

        // Buka modal
        document.getElementById("cropModal").style.display = "flex";

        cropImage.onload = function() {
          if (cropper) cropper.destroy();
          cropper = new Cropper(cropImage, {
            aspectRatio: 1,  
            viewMode: 1,
            autoCropArea: 1,
            movable: true,
            zoomable: true,
            rotatable: false,
            scalable: false
          });
        };
      };
      reader.readAsDataURL(file);
    });

    document.getElementById("cropBtn").addEventListener("click", function() {
      if (cropper) {
        const canvas = cropper.getCroppedCanvas({
          width: 200,
          height: 200
        });
        document.getElementById("profilePic").src = canvas.toDataURL();
        closeModal();
      }
    });

    function closeModal() {
      document.getElementById("cropModal").style.display = "none";
      if (cropper) {
        cropper.destroy();
        cropper = null;
      }
    }
  </script>
</body>
</html>


  <!-- Logout modal -->
  <div id="logoutModal" class="modal" aria-hidden="true">
    <div class="modal-backdrop" tabindex="-1"></div>
    <div class="modal-panel" role="dialog" aria-modal="true" aria-labelledby="logoutTitle">
      <h3 id="logoutTitle">Sahkan Log Keluar</h3>
      <p>Adakah anda pasti mahu log keluar?</p>
      <div class="modal-actions">
        <button id="confirmLogout" class="btn primary">Ya, Log Keluar</button>
        <button id="cancelLogout" class="btn">Tidak</button>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const logoutLink = document.querySelector('.logout-link a');
      const logoutBtn = document.querySelector('.profile-box .logout-btn');
      const modal = document.getElementById('logoutModal');
      const confirmBtn = document.getElementById('confirmLogout');
      const cancelBtn = document.getElementById('cancelLogout');
      const backdrop = modal.querySelector('.modal-backdrop');

      function openModal(href){
        modal.dataset.href = href || '';
        modal.setAttribute('aria-hidden','false');
        confirmBtn.focus();
      }

      function closeModal(){
        modal.setAttribute('aria-hidden','true');
        delete modal.dataset.href;
        logoutLink.focus();
      }

      if(logoutLink){
        logoutLink.addEventListener('click', function(e){
          e.preventDefault();
          openModal(this.getAttribute('href'));
        });
      }

      if(logoutBtn){
        logoutBtn.addEventListener('click', function(){
          openModal(logoutLink ? logoutLink.getAttribute('href') : '#');
        });
      }

      confirmBtn.addEventListener('click', function(){
        const href = modal.dataset.href || (logoutLink ? logoutLink.getAttribute('href') : '#');
        if(href && href!=='#'){
          try { localStorage.clear(); sessionStorage.clear(); } catch(e){}
          window.location.href = href;
        } else closeModal();
      });

      cancelBtn.addEventListener('click', closeModal);
      backdrop.addEventListener('click', closeModal);
      document.addEventListener('keydown', function(e){
        if(e.key==='Escape') closeModal();
      });
    })();
  </script>
</body>
</html>
